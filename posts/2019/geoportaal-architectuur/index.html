<!doctype html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Flanders Heritage Geoportal: All Together Now! &#8212; Flanders Heritage - Team Information  documentation</title>
    <link rel="stylesheet" href="../../../_static/css/app.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../../../../../_static/bower_components/jquery/dist/jquery.min.js"></script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../_static/language_data.js"></script>
    <link rel="author" title="About these documents" href="../../../about/" />
    <link rel="index" title="Index" href="../../../genindex/" />
    <link rel="search" title="Search" href="../../../search/" />
  

 
<meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
     (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new
     Date();a=s.createElement(o),
       m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-60370220-2', 'auto');
  ga('send', 'pageview');
</script>

  
  <link rel="alternate" type="application/atom+xml"  href="../../../blog/atom.xml" title="Flanders Heritage - Team Information Blog">
  
  
  <style type="text/css">
    ul.ablog-archive {list-style: none; overflow: auto; margin-left: 0px}
    ul.ablog-archive li {float: left; margin-right: 5px; font-size: 80%}
    ul.postlist a {font-style: italic;}
    ul.postlist-style-disc {list-style-type: disc;}
    ul.postlist-style-none {list-style-type: none;}
    ul.postlist-style-circle {list-style-type: circle;}
  </style>

  </head><body>
<!-- container -->
<div class="container">
  <script type="text/javascript" src="//widgets.vlaanderen.be/widget/live/5499d8dc0848446e91022c6dba9db343?mtime=1421237274"></script>
  <!-- header -->

  <!-- embed -->
  <div class="temp-embed"></div>

  <!-- large header bg image -->
  <div class="bgimage"></div>

  <!-- wrapper & responsive navigation -->
  <div class="wrapper clearfix">
    <div class="main-navigation-inner clearfix inner">



      <!-- logo -->
      <div class="logo-block">
        <div class="logo-block-inner">
          <a href="../../../">
            <img src="../../../_static/img/pyoes/OE-vlaanderen-logo.png" width="65">
            <h2>Vlaanderen</h2>
            <h4>is Erfgoed</h4>
          </a>
        </div>
      </div>
    </div>
  </div>

  <div class="header-border"></div>
  <div class="row">
    <div class="large-9 columns">
      <h3>Flanders Heritage - Team Information</h3>
    </div>
  </div>

  <!-- end header -->
  <div class="row">
    
    <div class="large-9 columns">
      <div class="body panel" role="main">
        
  <div class="section" id="flanders-heritage-geoportal-all-together-now">
<h1>Flanders Heritage Geoportal: All Together Now!<a class="headerlink" href="#flanders-heritage-geoportal-all-together-now" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="https://www.onroerenderfgoed.be">Flanders Heritage</a> has had a <a class="reference external" href="https://geo.onroerenderfgoed.be">geoportal</a> since 2013. Although it has grown and
transformed over the years, the basic goals and the architectural design have
remained largely unchanged. Our first and main requirement was that we wanted
something that was easy to use for a large userbase. We had observed that other
geoportals tended to cater to the GIS professionals and quite often sought to
build an online version of a desktop GIS. This creates a web application that
might be versatile and quite powerful to people who know GIS, but is ultimately
inaccessible to users who have no GIS experience. We wanted to create a user
experience similar to <cite>Google Maps</cite> and other webbased mapping platforms, but
specifically tailored to users looking for information on cultural heritage. We
also wanted the geoportal to feel like an integral part of our online
information systems. To achieve this we created reports that always link to our
online sources through their persistent URI’s. These URI’s are present as
metadata in all our geographical data and link features back to their authentic
source. The database you can go to for the latest version of record,  where
the data is always up to date.</p>
<p>A second requirement came about through the data we wanted to show. While
Flanders Heritage creates, maintains and publishes geodata about immovable
cultural heritage, it does not publish other geodata. We have always relied
heavily on <a class="reference external" href="https://informatie.vlaanderen.be">Flanders Information Agency</a>
(the former Agentschap Geografische Informatie Vlaanderen or AGIV) as our partner for
supplying us with geographical basemaps and non-heritage related information
layers. We also had other layers we wanted to incorporate, from other entities
of the Flemish Government such as <a class="reference external" href="https://mercator.vlaanderen.be/">Mercator</a>
or other countries (<a class="reference external" href="https://www.cultureelerfgoed.nl/">RCE</a>). We not only
rely upon <cite>Flanders Information Agency</cite> for geographical layers,
they also provide alfanumerical services that help in navigating maps.
There’s the <a class="reference external" href="https://overheid.vlaanderen.be/informatie-vlaanderen/producten-diensten/centraal-referentieadressenbestand-crab">CRAB service that enumerates all address data in Flanders</a>
, the <a class="reference external" href="https://overheid.vlaanderen.be/capakey-rest-service">CAPAKEY service</a>
that provides data on cadastral parcels and a geolocation
service that helps to quickly find a certain address in a free-form text-search
style. We wanted to use all these services, but not just copy their data, as
would have happened ten years earlier. We wanted to store as little data as
possible from these services. A few caches here and there are fine, but not
full-scale copies of other services and databases. We fetch the data at it’s
point of origin so the data we can show our end users are as uptodate as possible.</p>
<p>Finally, from a technical point of view we wanted to work with open source
software (both for costs reasons and because it fit our tecnical stack nicely).
We also wanted he maintenance of the portal be fairly simply, while still
allowing us to configure things in an optimal way. As is often the case, we
wanted to make the easy things simple to do and the hard things doable.
This philosopy has worked out well for us. Adding new layers is done through
configuration in code, which has allowed us to eg. optimise how layers are
combined.</p>
<img alt="../../../_images/geoportaal_architectuur.png" src="../../../_images/geoportaal_architectuur.png" />
<p><em>Software architecture of the Flanders Heritage Geoportal</em></p>
<p>So, if those were the main design considerations, where did we end up? As all
modern applications, the geoportal consists of a back- and a frontend. The frontend is the most
sizeable piece of code (about 98% of all code is Javascript, HTML and CSS) and
consists of the map layout, UI/UX and general presentation layout. Since the
code was written several years ago, it still uses a rather old Javascript
framework, <a class="reference external" href="https://dojotoolkit.org">Dojo</a>. The mapping interface uses
<a class="reference external" href="https://openlayers.org">Openlayers</a> (and <a class="reference external" href="http://proj4js.org/">PROJ 4</a>).
The HTML and CSS comes from our implementation of the Flemish corporate style
for websites using the <cite>Zurb Foundation framework &lt;https://foundation.zurb.com/&gt;`_</cite>.
The geoportal frontend communicates entirely through services with either our
own geoportal backend or other webservices.</p>
<p>Those other webservices are for the largest part INSPIRE compliant WMS, WMTS
and WFS services hosted by one of several parties:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://informatie.vlaanderen.be">Flanders Information Agency</a> hosts
a large number of reference datasets such as basemaps, aerial photography,
historic maps, address data,     cadastrals parcels, … in the offical
<a class="reference external" href="https://www.geopunt.be">Flemish INSPIRE node</a>.</p></li>
<li><p><a class="reference external" href="https://mercator.vlaanderen.be/">Mercator</a> is an INSPIRE subnode that hosts datasets and maps dealing
with environmental data, but als our heritage data.</p></li>
<li><p>Specifically for our geoportal we host our own Geoserver instance. This
allows us a bit more control over certain presentation related issues and is
necessary because a few layers are reserved for internal or authenticated
use only as we’ll explain later.</p></li>
<li><p>We have also include the Dutch INSPIRE layers about cultural heritage from
our colleagues at <cite>Cultural Heritage Agency</cite>. Heritage doesn’t adhere to
current day political boundaries, so it can be interesting for our users to
have a look across the border. Having other published WMS services makes
this easy to incorporate.</p></li>
</ul>
<p>Finally we also use a few layers that are not a part of INSPIRE. We use
OpenStreetMap as a good baselayer for general use and the NGI Topographical map
for those who are interested. And for fun we also added the Pelagios map of
the Roman World.</p>
<p>The geoportal backend is a simple Python application, written using the Pyramid
framework. Apart from serving the static files for the frontend, it has two
major functions. It’s main job is to proxy certain location services by
<cite>Flanders Information Agency</cite>:</p>
<ul class="simple">
<li><p>Geolocation, a service that suggests adressess based on simple text imput
and returns geographical coordinates. It’s a quick and easy way to navigate
our map of Flanders.</p></li>
<li><p>CRAB, a more much complex service that has full-address data in the form of
lists of municipalities, streets, housenumbers and their location. We use
this service in most of our systems to validate incoming data, but in the
geoportal it’s used as a navigational aid. Users can descend from provinces
over municipalities and streets to addresses, without ever getting lost
along the way.</p></li>
<li><p>CAPAKEY, a REST service that has parcel data in the form of lists of
municipalities, cadastral divisions and section and parcel numbers. Similar
to the CRAB service, we use this service to guide our users through the
Belgian cadastral system to the parcel they are interested in.</p></li>
</ul>
<p>Nowadays, these three services are freely and openly available, so the need to
proxy them might be less obvious now than when we started:</p>
<ul class="simple">
<li><p>In te beginning both CRAB and CAPAKEY were SOAP services, difficult, if not
impossible, to work with from within a browser using JS. Recently, CAPAKEY
switched to a REST Service, so technically we could access it directly.
But we’d still be left with the CRAB SOAP service. When we started out, both
the CRAB and CAPAKEY services required authentication as well.</p></li>
<li><p>It frees us from fiddling with CORS headers. We already use CORS quite
often, but getting everything to function together can be a hassle. The
Geolocation does not support CORS anyway, so we would have to work with
something like JSON-P there.</p></li>
<li><p>It protects us from upstream API changes. Since all our applications use our
proxies, we only need to ensure the proxies knows how to talk to the
upstream API. If these change (eg. the move from SOAP to REST for CAPAKEY),
the impact on our systems is minimal and clear.</p></li>
<li><p>The proxies for CRAB and CAPAKEY also function as caches and reduce the
number of calls we have to make to the upstream services tremendously.</p></li>
<li><p>We enhanced the AIV services in a few ways. We added a list of Flemish
provinces, not present in either CRAB or CAPAKEY. We also incorporated a
python library of all country codes, to be used in address validations.</p></li>
</ul>
<p>If you yourself have a need for Flemish address or parcel data, and you’re
using Python, feel free to use or <cite>CRABpy</cite> library. If you’re using the same
framework we are, <cite>Pyramid</cite>, you can also use <cite>CRABpy_pyramid</cite> that makes it
easy to integrate the library in a Pyramid environment and also offers a set of
opinionated JSON views on the upstream services.</p>
<p>The other main component of our Python backend is an open source project called
Mapproxy. This wonderful library helped us solve what, for a while, was the
most challenging aspect of building the geoportal: dealing with non-publicly
accessible spatial data. Our prime example is a database of archaeological
findspots. For several reasons, this database and the accompanying GIS data, is
not available to the general public. The data is not part of INSPIRE, but does
have WMS/WFS services in our own Geoserver instance. This service can be
protected by using username/password. Off course, if we would just include this
service in our frontend code, we would be exposing the username and password to
clients. Luckily, Mapproxy makes this easy to solve. The services are proxied
on our geoportal server, but with Mapproxy intercepting all calls and doing
authentication and authorisation on the supplied credentials. This way, we can
transform the typical Pyramid authentication/authorisation policies we use in
all our webapplications to statements about the configured GIS layers.</p>
<p>Apart from this essential security related proxying, we also proxy
WMS GetFeatureInfo requests through Mapproxy, again to avoid potential CORS issues.
In the near future we might also be using it’s caching features, although we
haven’t done so this far.</p>
<p>All in all, our geoportal has proven to be an important online platform for
us. It has been in use for years now and is used quite a lot. The cost of
building and maintaining it however, has been fairly low. The portal itself
requires very little when it comes to hardware to run on and has a very low
footrpint when running. Interested in our setup, have a look at our software
libraries at <a class="reference external" href="https://github.com/onroerenderfgoed">Github</a> or drop us a line at
<a class="reference external" href="mailto:ict&#37;&#52;&#48;onroerenderfgoed&#46;be">ict<span>&#64;</span>onroerenderfgoed<span>&#46;</span>be</a></p>
</div>

  <div class="section">
  
    


  
  
  </div>

      </div>
    </div>
    <div class="large-3 columns">
      
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  
  
  <h2>
  
    <i class="fa fa-pencil"></i>
     Draft 
  
  </h2>

  <ul>
    

  
  <li id="author"><span><i class="fa-fw fa fa-user"></i>
    
      
      <a href="../../../blog/author/koen-van-daele/">Koen van Daele</a>
      
    </li>
  

  

  
  <li id="language"><span><i class="fa-fw fa fa-language"></i>
    
      
      <a href="../../../blog/language/english/">English</a>
      
    </li>
  

  
  <li id="category"><span><i class="fa-fw fa fa-folder-open"></i>
    
      
      <a href="../../../blog/category/services/">services</a>,
      
    
      gis,
    
      architecture
    </li>
  

  
  <li id="tags"><span><i class="fa-fw fa fa-tags"></i>
      
    
      
      <a href="../../../blog/tag/geoportaal/">geoportaal</a>
      
    
      
      <a href="../../../blog/tag/geoserver/">geoserver</a>
      
    </li>
  
  
  </ul>



<div class="panel">
  <h3><a href="../../../blog/">Recent Posts</a></h3>
  <ul>
    
    
      <li><a href="../beeldbank-zoeken/">31 oktober - Zoeken in de beeldbank</a></li>
    
      <li><a href="../inventaris-themas-personen-gebeurtenissen/">30 september - Thema’s, personen en gebeurtenissen</a></li>
    
      <li><a href="../inventaris-nieuw/">14 augustus - Tien jaar inventaris</a></li>
    
      <li><a href="../inventaris-zoeken-full-text/">25 juli - Full text zoeken in de inventaris</a></li>
    
      <li><a href="../inventaris-erfgoedobjecten-aanduidingsobjecten/">18 juni - Erfgoedobjecten en aanduidingsobjecten</a></li>
    
  </ul>
</div>
<div class="panel">
<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../about/">Flanders Heritage Agency - Team Information</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../projects/">Projects</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../projects/#applications">Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../projects/#libraries">Libraries</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../publications/">Publications</a></li>
</ul>


</div>
<div class="panel">
  <h3><a href="../../../blog/tag/">Tags</a></h3>
  <style type="text/css">
    ul.ablog-cloud {list-style: none; overflow: auto;}
    ul.ablog-cloud li {float: left; height: 20pt; line-height: 18pt; margin-right: 5px;}
    ul.ablog-cloud a {text-decoration: none; vertical-align: middle;}
    li.ablog-cloud-1{font-size: 80%;}
    li.ablog-cloud-2{font-size: 95%;}
    li.ablog-cloud-3{font-size: 110%;}
    li.ablog-cloud-4{font-size: 125%;}
    li.ablog-cloud-5{font-size: 140%;}
  </style>
  <ul class="ablog-cloud">
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../../blog/tag/aanduidingsobjecten/">aanduidingsobjecten</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-3">
        <a href="../../../blog/tag/atramhasis/">atramhasis</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../../blog/tag/beeldbank/">beeldbank</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../../blog/tag/erfgoedobjecten/">erfgoedobjecten</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-2">
        <a href="../../../blog/tag/full-text/">full-text</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../../blog/tag/gebeurtenissen/">gebeurtenissen</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../../blog/tag/geoportaal/">geoportaal</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../../blog/tag/geoserver/">geoserver</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-3">
        <a href="../../../blog/tag/geozoekdiensten/">geozoekdiensten</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../../blog/tag/indexing/">indexing</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-5">
        <a href="../../../blog/tag/inventaris/">inventaris</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../../blog/tag/personen/">personen</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-4">
        <a href="../../../blog/tag/search/">search</a></li>
      
    
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../../blog/tag/static_map_generator/">static_map_generator</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../../blog/tag/technology-stack/">technology stack</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../../blog/tag/themas/">themas</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../../blog/tag/vocabulary/">vocabulary</a></li>
      
    
  </ul>
</div>

<div class="panel">
  <h3><a href="../../../blog/category/">Categories</a></h3>
  <ul>
  
    
    <li><a href="../../../blog/category/gis/">GIS (3)</a></li>
    
  
    
  
    
  
    
    <li><a href="../../../blog/category/imagebase/">imagebase (1)</a></li>
    
  
    
    <li><a href="../../../blog/category/inventory/">inventory (5)</a></li>
    
  
    
    <li><a href="../../../blog/category/open-source/">open source (3)</a></li>
    
  
    
    <li><a href="../../../blog/category/releases/">releases (2)</a></li>
    
  
    
    <li><a href="../../../blog/category/services/">services (5)</a></li>
    
  
    
    <li><a href="../../../blog/category/thesaurus/">thesaurus (4)</a></li>
    
  
  </ul>
</div>

<div class="panel">
  <h3><a href="../../../blog/archive/">Archives</a></h3>
  <ul>
  
    
    <li><a href="../../../blog/2019/">2019 (6)</a></li>
    
  
    
    <li><a href="../../../blog/2018/">2018 (1)</a></li>
    
  
    
    <li><a href="../../../blog/2017/">2017 (5)</a></li>
    
  
    
    <li><a href="../../../blog/2016/">2016 (1)</a></li>
    
  
  </ul>
</div>

<form action="../../../search/" method="get">
 <div class="panel fl-block-search">
  <div class="form-group">
   <input type="text" name="q" class="form-control" placeholder="Trefwoord ..." />
  </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />

  <div class="btn-group-justified">
   <div class="btn-group">
    <button type="submit" class="button expand" style="font-size:11px">Zoeken</button>
   </div>
  </div>
 </div>
</form>
        </div>
      </div>
    </div>
    
  </div>
  <div class="push"></div>
</div> <!-- end container -->
<!-- footer -->
<div id="footerContainer">
  <footer id="footer-bottom" role="contentinfo">
    <div class="footer-bottom-inner inner">
      <p class="copyright">
        &#169; Copyright 2016-2019, Flanders Heritage Agency.
        Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.0.1.
      </p>
      <p class="pull-right">
        <a href="#">Terug naar boven</a>
      </p>
    </div>
  </footer>
  <script type="text/javascript" src="//widgets.vlaanderen.be/widget/live/79a9f632dc8e45aa884f7924ee16f7bf?mtime=1421237274"></script>
</div>
<!-- end footer -->
<script src="../../../_static/bower_components/foundation/js/foundation.min.js"></script>
<script src="../../../_static/js/app.js"></script>
  </body>
</html>